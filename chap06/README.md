# 第 6 章 布局管理
放置在窗体中的每一个窗口部件都必须给定一个合适的大小和位置。Qt 提供了多个用于在窗体中摆放窗口部件的类：`QHBoxLayout`、`QVBoxLayout`、`QGridLayout`和`QStackedLayout`。  
Qt 布局类可以确保窗体能够自适应于不同的字体、语言和系统平台。

## 6.1 在窗体中摆放窗口部件
一共有三种基本方法用于管理窗体上子窗口部件的布局：绝对位置法、人工布局法和布局管理器法。

### 绝对位置法
绝对位置法是一种最原始的摆放窗口部件的方法，可以通过`QWidget::setGeometry()`方法对窗体的各个子窗口部件分配固定的大小和位置，以及使用`QWidget::setFixedSize()`对窗体分配固定的大小实现。

#### 缺点
+ 用户无法改变窗口的大小
+ 无法自适应于不同的字体、语言和系统平台
+ 必须人工计算这些位置和大小

### 人工布局法
尽管还是需要给定窗口部件的绝对位置，但是利用人工布局方法给定的大小尺寸总是可以和窗口的大小成比例。
通过重新实现窗体的`resizeEvent()`方法，在窗体大小改变时，重新计算窗口部件的位置和大小。

### 布局管理器法
布局管理器会为每种类型的窗口部件提供一些合理的默认值，并且也会考虑每一个窗口部件的大小提示（`sizeHint()`），并且会自动通过调整布局来响应字体的变化、内容的改变以及窗口大小的调整。
布局管理器也会自动根据窗体中子窗口部件的最小大小提示（`minimumSizeHint`）和大小提示（`sizeHint()`），从总体上为这个窗体设置一个最小尺寸。

最为重要的三种布局管理器是：`QHBoxLayout`、`QVBoxLayout`和`QGridLayout`。这三个类从`QLayout`派生，并且提供了`addWidget()`方法，用于将窗口部件添加到布局中，而`QLayout`类为布局提供了基本框架。

#### Qt 设计师中使用布局管理器

### 大小策略（`QSizePolicy`）
一个窗口部件的大小策略会告诉布局系统应该如何对它进行拉伸或者压缩。一个`QSizePolicy`既包含一个水平分量也包含一个垂直分量。
+ `Fixed`：窗口部件不能被拉伸或者压缩。窗口部件的大小尺寸总是保持为其大小提示的尺寸。
+ `Minimum`：窗口部件的大小提示就是它的最小大小。再不能把窗口部件压缩到比这个大小提示还要小的大小，但是可以拉伸它来填充尽可能多的空间。
+ `Maximum`：窗口部件的大小提示就是它的最大大小。但是可以把该窗口部件压缩成它的最小大小提示的尺寸。
+ `Preferred`：窗口部件的大小提示就是它比较合适的大小。可以对该窗口部件进行拉伸和压缩。
+ `Expanding`：可以拉伸或者压缩该窗口部件，并且它特别希望能够变长变高。
